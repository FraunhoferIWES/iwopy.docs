<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multi objective geometric chain &mdash; iwopy 0.1.3
 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Wind farm layout optimization" href="../wind_farm_layout.html" />
    <link rel="prev" title="Electrostatic potential minimization" href="electrostatics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> iwopy
          </a>
              <div class="version">
                0.1.3

              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installation-via-conda">Installation via conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installation-via-pip">Installation via pip</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#virtual-python-environment">Virtual Python environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#standard-users">Standard users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#developers">Developers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simple_function.html">Simple function minimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="electrostatics.html">Electrostatic potential minimization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multi objective geometric chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wind_farm_layout.html">Wind farm layout optimization</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.html">iwopy.benchmarks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.branin.html">iwopy.benchmarks.branin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.branin.BraninObjective.html">iwopy.benchmarks.branin.BraninObjective</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.branin.BraninProblem.html">iwopy.benchmarks.branin.BraninProblem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.rosenbrock.html">iwopy.benchmarks.rosenbrock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.rosenbrock.RosenbrockObjective.html">iwopy.benchmarks.rosenbrock.RosenbrockObjective</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.benchmarks.rosenbrock.RosenbrockProblem.html">iwopy.benchmarks.rosenbrock.RosenbrockProblem</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_autosummary/iwopy.core.html">iwopy.core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.base.html">iwopy.core.base</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.base.Base.html">iwopy.core.base.Base</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.constraint.html">iwopy.core.constraint</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.constraint.Constraint.html">iwopy.core.constraint.Constraint</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.function.html">iwopy.core.function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.function.OptFunction.html">iwopy.core.function.OptFunction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.function_list.html">iwopy.core.function_list</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.function_list.OptFunctionList.html">iwopy.core.function_list.OptFunctionList</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.function_subset.html">iwopy.core.function_subset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.function_subset.OptFunctionSubset.html">iwopy.core.function_subset.OptFunctionSubset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.memory.html">iwopy.core.memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.memory.get_default_keyf.html">iwopy.core.memory.get_default_keyf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.memory.Memory.html">iwopy.core.memory.Memory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.objective.html">iwopy.core.objective</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.objective.Objective.html">iwopy.core.objective.Objective</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.opt_results.html">iwopy.core.opt_results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.opt_results.MultiObjOptResults.html">iwopy.core.opt_results.MultiObjOptResults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.opt_results.SingleObjOptResults.html">iwopy.core.opt_results.SingleObjOptResults</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.optimizer.html">iwopy.core.optimizer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.optimizer.Optimizer.html">iwopy.core.optimizer.Optimizer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.core.problem.html">iwopy.core.problem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.problem.Problem.html">iwopy.core.problem.Problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.core.problem.ProblemDefaultFunc.html">iwopy.core.problem.ProblemDefaultFunc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_autosummary/iwopy.interfaces.html">iwopy.interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pygmo.html">iwopy.interfaces.pygmo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pygmo.algos.html">iwopy.interfaces.pygmo.algos</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pygmo.imports.html">iwopy.interfaces.pygmo.imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pygmo.optimizer.html">iwopy.interfaces.pygmo.optimizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pygmo.problem.html">iwopy.interfaces.pygmo.problem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pymoo.html">iwopy.interfaces.pymoo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pymoo.factory.html">iwopy.interfaces.pymoo.factory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pymoo.imports.html">iwopy.interfaces.pymoo.imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pymoo.optimizer.html">iwopy.interfaces.pymoo.optimizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.interfaces.pymoo.problem.html">iwopy.interfaces.pymoo.problem</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_autosummary/iwopy.utils.html">iwopy.utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.utils.discretization.html">iwopy.utils.discretization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.utils.discretization.RegularDiscretizationGrid.html">iwopy.utils.discretization.RegularDiscretizationGrid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.utils.stdout.html">iwopy.utils.stdout</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.utils.stdout.suppress_stdout.html">iwopy.utils.stdout.suppress_stdout</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_autosummary/iwopy.wrappers.html">iwopy.wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.wrappers.discretize_reg_grid.html">iwopy.wrappers.discretize_reg_grid</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.wrappers.discretize_reg_grid.DiscretizeRegGrid.html">iwopy.wrappers.discretize_reg_grid.DiscretizeRegGrid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.wrappers.local_fd.html">iwopy.wrappers.local_fd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.wrappers.local_fd.LocalFD.html">iwopy.wrappers.local_fd.LocalFD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.wrappers.problem_wrapper.html">iwopy.wrappers.problem_wrapper</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.wrappers.problem_wrapper.ProblemWrapper.html">iwopy.wrappers.problem_wrapper.ProblemWrapper</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.wrappers.simple_constraint.html">iwopy.wrappers.simple_constraint</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.wrappers.simple_constraint.SimpleConstraint.html">iwopy.wrappers.simple_constraint.SimpleConstraint</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.wrappers.simple_objective.html">iwopy.wrappers.simple_objective</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.wrappers.simple_objective.SimpleObjective.html">iwopy.wrappers.simple_objective.SimpleObjective</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/iwopy.wrappers.simple_problem.html">iwopy.wrappers.simple_problem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/iwopy.wrappers.simple_problem.SimpleProblem.html">iwopy.wrappers.simple_problem.SimpleProblem</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-0-11-alpha">v0.0.11-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-0-12-alpha">v0.0.12-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-0-13-alpha">v0.0.13-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-0-14-alpha">v0.0.14-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-0-15-alpha">v0.0.15-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-1-0-alpha">v0.1.0-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-1-1-alpha">v0.1.1-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-1-2-alpha">v0.1.2-alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#v0-1-3-alpha">v0.1.3-alpha</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">iwopy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../examples.html">Examples</a></li>
      <li class="breadcrumb-item active">Multi objective geometric chain</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/multi_obj_chain.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Multi-objective-geometric-chain">
<h1>Multi objective geometric chain<a class="headerlink" href="#Multi-objective-geometric-chain" title="Permalink to this heading"></a>
</h1>
<p>Here we demonstrate how to solve a simple multi-objective problem via <code class="docutils literal notranslate"><span class="pre">pymoo</span></code>’s <a class="reference external" href="https://pymoo.org/algorithms/moo/nsga2.html">NSGA2</a> algorithm within the <code class="docutils literal notranslate"><span class="pre">iwopy</span></code> framework.</p>
<p>The problem that we want to attack here is based on a chain of geometrically touching circles in two dimensions, for example representing a chain of marbles on a string. The marbles may have different radii, and each of them is allowed to touch two neighbours (except the outermost marbles, which have only one neighbour).</p>
<p>Our two objectives for this chain of blobs are:</p>
<ul class="simple">
<li><p>Maximize the extension of the overall chain in x-direction,</p></li>
<li><p>Maximize the extension of the overall chain in y-direction.</p></li>
</ul>
<p>Obviously these objectives are contradictory, and hence we can expect a nice and clean Pareto front when looking at solutions.</p>
<p>Here are the required imports:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>import numpy as np
import matplotlib.pyplot as plt

from iwopy import Problem, Constraint, Objective
from iwopy.interfaces.pymoo import Optimizer_pymoo
</pre></div>
</div>
</div>
<p>First, we create a class that describes our chain of blobs. Actually, since we are planning to use <code class="docutils literal notranslate"><span class="pre">iwopy</span></code>’s fast vectorization capabilities, we directly implement a <em>population</em> of chains. This means that each object of the class represents not one but <code class="docutils literal notranslate"><span class="pre">n_pop</span></code> chains, each containing <code class="docutils literal notranslate"><span class="pre">N</span></code> blobs. Note that the <em>individuals</em> of a <em>population</em> are completely independent of one another.</p>
<p>The geometry of a chain is descibed by <code class="docutils literal notranslate"><span class="pre">N-1</span></code> angles in degrees, giving the direction from one blob centre to the next. When combined with the information of the radii of the blobs and the location of the first blob in the chain, these angles fully determine the location of each blob. They will later serve as the optimization variables of the problem:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>class ChainPopulation:
    """ A polulation of chains with N blobs """

    def __init__(self, n_pop, N, radii=1., xy0=0., alpha=0.):
        self.N = N
        self.n_pop = n_pop

        self.radii = np.zeros(N)
        self.radii[:] = radii

        self.xy = np.zeros((n_pop, N, 2))
        self.xy[:, 0] = xy0

        self.alpha = np.zeros((n_pop, N-1))
        self.dists = np.zeros((n_pop, N, N))
        self.set_alpha(alpha)

    def set_alpha(self, alpha):
        """ Set new alpha values and update data """
        self.alpha[:] = alpha
        arad = self.alpha*np.pi/180.
        uv = np.stack([np.cos(arad), np.sin(arad)], axis=-1)
        for i in range(1, self.N):
            self.xy[:, i] = self.xy[:, i-1] + uv[:, i-1] * (
                                self.radii[i-1] + self.radii[i])

        for i in range(self.N):
            d = self.xy - self.xy[:, i, None]
            self.dists[:, i] = np.linalg.norm(d, axis=-1)

    def get_fig(self, i=0, ax=None, title=None):
        """ Visualize the chain for a selected individual """
        if ax is None:
            fig, ax = plt.subplots()
        else:
            fig = ax.get_figure()
        xy = self.xy[i]
        for pi, pxy in enumerate(xy):
            ax.add_patch(plt.Circle(pxy, self.radii[pi], color='orange'))
        rmax = np.max(self.radii)
        xy_imin = np.argmin(xy, axis=0)
        xy_imax = np.argmax(xy, axis=0)
        xy_min = xy[xy_imin, range(2)] - rmax
        xy_max = xy[xy_imax, range(2)] + rmax
        xy_del = xy_max - xy_min
        ax.set_xlim((xy_min[0] - 0.1*xy_del[0], xy_max[0] + 0.1*xy_del[0]))
        ax.set_ylim((xy_min[1] - 0.1*xy_del[1], xy_max[1] + 0.1*xy_del[1]))
        ax.set_aspect("equal", adjustable="box")
        ax.set_xlabel("x")
        ax.set_ylabel("y")
        ax.set_title(f"N = {self.N}" if title is None else title)
        return fig
</pre></div>
</div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">get_fig</span></code> function which was added for results plotting in the end.</p>
<p>Next, we define an optimization problem whose optimization variables are the angles of the chain of blobs. Our intention is the evaluation in vectorized form, as mitigated by the <code class="docutils literal notranslate"><span class="pre">apply_population</span></code> function. Here this simply updates the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> values of the chain to those given by the optimizer:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>class ChainProblem(Problem):

    def __init__(self, chain):
        super().__init__(name="chain_problem")
        self.chain = chain

    def var_names_float(self):
        """ The variable names """
        return [f"alpha_{i:04}" for i in range(self.chain.N - 1)]

    def initial_values_float(self):
        """ The initial variable values """
        return self.chain.alpha[:-1]

    def min_values_float(self):
        """ The minimal variable values: 0 degrees """
        return np.full(self.chain.N - 1, 0.)

    def max_values_float(self):
        """ The maximal variable values: 360 degrees """
        return np.full(self.chain.N - 1, 360.)

    def apply_individual(self, vars_int, vars_float):
        """ Apply new variables from the optimizer """
        self.chain.set_alpha(vars_float[None, :])

    def apply_population(self, vars_int, vars_float):
        """ Apply new variables from the optimizer """
        self.chain.set_alpha(vars_float)
</pre></div>
</div>
</div>
<p>We want to avoid that the chain is crossing, or that any of the blobs that are not neighbours crash into each other. Let’s introduce a constraint that prevent such solutions:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>class NoCrossing(Constraint):
    """ The chain blobs are not allowed to cross """

    def __init__(self, problem, tol=1e-3):
        super().__init__(
            problem, "nocross", vnames_float=problem.var_names_float(), tol=tol
        )
        self.chain = problem.chain

    def n_components(self):
        """ Each blob touches two neighbours only """
        N = self.chain.N
        return int((N**2 - N - 2*(N - 1))/2)

    def calc_individual(self, vars_int, vars_float, problem_results, cmpnts=None):
        """ Positive values for too nearby 3rd and higher neighbours """
        rmin = np.min(self.chain.radii)
        values = np.zeros(self.n_components())
        i0 = 0
        for i in range(self.chain.N - 2):
            i1 = i0 + self.chain.N - 2 - i
            meet = self.chain.dists[0, i, i+2:] - self.chain.radii[i] - self.chain.radii[i+2:]
            values[i0:i1] = 0.1 * rmin - meet
            i0 = i1

        return values

    def calc_population(self, vars_int, vars_float, problem_results, cmpnts=None):
        """ Positive values for too nearby 3rd and higher neighbours """
        rmin = np.min(self.chain.radii)
        values = np.zeros((self.chain.n_pop, self.n_components()))
        i0 = 0
        for i in range(self.chain.N - 2):
            i1 = i0 + self.chain.N - 2 - i
            meet = self.chain.dists[:, i, i+2:] - self.chain.radii[i] - self.chain.radii[None, i+2:]
            values[:, i0:i1] = 0.1 * rmin - meet
            i0 = i1

        return values
</pre></div>
</div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">N</span></code> blobs in the chain, this defines <code class="docutils literal notranslate"><span class="pre">(N**2</span> <span class="pre">-</span> <span class="pre">N</span> <span class="pre">-</span> <span class="pre">(N</span> <span class="pre">-</span> <span class="pre">1))/2</span></code> costraint component functions. Imagine a matrix with <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">x</span> <span class="pre">N</span></code> entries. Since only 3rd neighbours onwards correspond to a constraint, and there is no need to repeat constraints for backward located blobs on the chain, this constraint number represents the upper-diagonal content of that matrix when ignoring the diagonal and also the secondary diagonal.</p>
<p>The objectives are straight-forward measures of the extension of given directions:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><br><span></span>class MaxStretch(Objective):
    """ Aim for maximal stretch along a given direction """

    def __init__(self, problem, direction=np.array([0., 1.]), name="stretch"):
        super().__init__(problem, name, vnames_float=problem.var_names_float())
        self.chain = problem.chain
        self.direction = direction

    def n_components(self):
        """ There is only one component for this objective """
        return 1

    def maximize(self):
        """ The stretch length is to be maximized """
        return [True]

    def calc_individual(self, vars_int, vars_float, problem_results, cmpnts=None):
        """ Calculate the stretch length """
        u = np.einsum('cd,d-&gt;c', self.chain.xy[0], self.direction)
        return np.max(u + self.chain.radii) - np.min(u + self.chain.radii)

    def calc_population(self, vars_int, vars_float, problem_results, cmpnts=None):
        """ Calculate the stretch length """
        u = np.einsum('pcd,d-&gt;pc', self.chain.xy, self.direction)[:, :, None]
        return np.max(u + self.chain.radii[None, :, None], axis=1) - np.min(u - self.chain.radii[None, :, None], axis=1)
<br></pre></div>
</div>
</div>
<p>This completes our elements for the description of our optimization problem. So let’s create the problem and add objectives and constraints, here for maximal radius <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">5</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">10</span></code> blobs per chain:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>r = 5.0
n = 10
n_pop = 100

radii = np.random.uniform(r/2., r, n)
chain = ChainPopulation(n_pop, n, radii)

problem = ChainProblem(chain)
problem.add_constraint(NoCrossing(problem))
problem.add_objective(MaxStretch(problem, direction=np.array([1.,0.]), name="stretch_x"))
problem.add_objective(MaxStretch(problem, direction=np.array([0.,1.]), name="stretch_y"))
problem.initialize()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Problem 'chain_problem' (ChainProblem): Initializing
----------------------------------------------------
  n_vars_int   : 0
  n_vars_float : 9
----------------------------------------------------
  n_objectives : 2
  n_obj_cmptns : 2
----------------------------------------------------
  n_constraints: 1
  n_con_cmptns : 36
----------------------------------------------------
</pre></div>
</div>
</div>
<p>Notice that we selected <code class="docutils literal notranslate"><span class="pre">n_pop</span> <span class="pre">=</span> <span class="pre">100</span></code> individuals per population.</p>
<p>We would like to solve this problem using <code class="docutils literal notranslate"><span class="pre">pymoo</span></code>’s <code class="docutils literal notranslate"><span class="pre">NSGA2</span></code> algorithm. Here we create the corresponding solver object and initialize it:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>solver = Optimizer_pymoo(
    problem,
    problem_pars=dict(
        vectorize=True,
    ),
    algo_pars=dict(
        type="nsga2",
        pop_size=n_pop,
        seed=42,
    ),
    setup_pars=dict(),
    term_pars=dict(
        type="default",
        n_max_gen=200,
        ftol=0,
        xtol=0,
    ),
)
solver.initialize()
solver.print_info()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Initializing Optimizer_pymoo
Selecting sampling: float_random (FloatRandomSampling)
Selecting algorithm: nsga2 (NSGA2)
Selecting termination: default (DefaultMultiObjectiveTermination)

Problem:
--------
  vectorize: True

Algorithm:
----------
  type: nsga2
  pop_size: 100
  seed: 42

Termination:
------------
  n_max_gen: 200
  ftol: 0
  xtol: 0

</pre></div>
</div>
</div>
<p>Notice that we selected <code class="docutils literal notranslate"><span class="pre">n_max_gen</span> <span class="pre">=</span> <span class="pre">200</span></code> generations in this setup. We are now ready to go! Let’s run the solver:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>results = solver.solve(verbosity=0)
solver.finalize(results)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Optimizer_pymoo: Optimization run finished
  Success: 100.00 %
  Best stretch_x = 69.60010711732801
  Best stretch_y = 69.56779006082309
</pre></div>
</div>
</div>
<p>All solution data is now contained in the <code class="docutils literal notranslate"><span class="pre">results</span></code> object. We can ask it to create a Pareto front plot:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>ax = results.plot_pareto()
plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_multi_obj_chain_18_0.png" src="../_images/notebooks_multi_obj_chain_18_0.png">
</div>
</div>
<p>One of the nice things about <code class="docutils literal notranslate"><span class="pre">NSGA2</span></code> is that it produces a well covered Pareto front in the final population. We can have a look at individuals, picking them according to weights of the objectives:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>for w in [[1, 0], [0.5, 0.5], [0, 1]]:
    i = results.find_pareto_objmix(w, max=True)
    fig = chain.get_fig(i, title=f"Weights stretch x, y: {w}")

    plt.show()
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_multi_obj_chain_20_0.png" src="../_images/notebooks_multi_obj_chain_20_0.png">
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_multi_obj_chain_20_1.png" src="../_images/notebooks_multi_obj_chain_20_1.png">
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_multi_obj_chain_20_2.png" src="../_images/notebooks_multi_obj_chain_20_2.png">
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate">
<div class="highlight"><pre><span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate">
<div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="electrostatics.html" class="btn btn-neutral float-left" title="Electrostatic potential minimization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../wind_farm_layout.html" class="btn btn-neutral float-right" title="Wind farm layout optimization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Fraunhofer IWES.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #009879;
    }
  </style>


</body>
</html>